
/***************************** Color Scheme **********************************/

/* white
 * #bec0c2  Default text color
 * #4d4f52  Highlighted backgrounds for: QMenuBar::item, QToolButton
 * #404244  Background for: QWidget, QToolBar, QToolButton, QScrollbar
 * #313234  Background for: QListView, QAbstractScrollArea (inherited: QTreeView)
 * #2e2f30  Background for: QMenuBar, QMenu, QComboBox's popup, QPlainTextEdit, Console, QLineEdit, QSpinBoxtext
 * #212222  Borders for: QMenu, QPushButton, QLineEdit, QSpinBox, QComboBox, QListView, QTreeView, QScrollbar
 * black
 *
 * For highlighting/selecting, we either choose a lighter or darker existing tone.
 */

/******************************** Default ************************************/

/* Be aware that in terms of qss selector specificity (see 'Conflict
 * Resolution' in http://doc.qt.io/qt-5/stylesheet-syntax.html), C++ class
 * inheritance is irrelevant. This means that "QWidget" and "QPushButton" have
 * the same specificity, and whichever appears last in this file takes
 * precedence. Therefore, it is important that these generic styles appear
 * at the beginning of this file.
 */

/* The font size is chosen such that, on a 1080p screen (i.e., not high-DPI),
 * the actual height of "OK" and "1.0" is 8px. Such text made of capital
 * letters or digits should be perfectly centered in buttons, spin boxes, etc.:
 *
 *  .---------------------------.
 *  |  1px:  top border         |
 *  |---------------------------|
 *  |  8px:  spacing            |
 *  |  8px:  height of text     |   Total widget height: 26px
 *  |  8px:  spacing            |
 *  |---------------------------|
 *  |  1px:  bottom border      |
 *  '---------------------------'
 *
 * On high-DPI screens, it matters less to have the height of capital letters
 * and digits be an even number of pixels, since an offset of 1px from perfect
 * centering is less noticeable, especially since it depends on the actual
 * text.
 */

QWidget {
    font-family: "Source Sans Pro";
    font-style: normal;
    font-weight: normal;
    font-size: 10pt;
    background: #404244;
    color: #dddddd;
}

QPlainTextEdit,
QLineEdit,
QSpinBox {
    selection-color: #dddddd;
    selection-background-color: #0b52ac;
}

/******************************** Menu Bar ***********************************/

QMenuBar {
    background: #2e2f30;
    border: 0px;
    padding: 0px;
}

QMenuBar::item {
    spacing: 0px;
    border: 0px;
    padding: 7px 12px;
}

QMenuBar::item:hover,
QMenuBar::item:selected,
QMenuBar::item:pressed {
    background: #212222;
}

/********************************* Menu **************************************/

QMenu,
QComboBox QFrame {
    background: #2e2f30;
    border: 1px solid #212222;
    padding: 3px 0px;
}

QMenu::item {
    padding: 5px 20px 5px 40px;
    background: #2e2f30;
}

QMenu::item:hover,
QMenu::item:selected,
QMenu::item:pressed {
    background: #212222;
}

QMenu::separator {
    height: 1px;
    background: #212222;
    margin: 3px 10px;
}

QMenu::indicator {
    width: 10px;
    height: 10px;
}

QMenu::indicator:non-exclusive {
    margin-left: 10px;
    border: 1px solid #dddddd;
    border-radius: 2px;
}

QMenu::indicator:non-exclusive:unchecked {
    background-color: transparent;
}

QMenu::indicator:non-exclusive:checked {
    background-color: #dddddd;
}

/********************************* Toolbar ***********************************/

QToolBar {
    border: 0px;
    padding: 0px;
    background: #404244;
}

QToolButton {
    border: 0px;
    padding: 10px;
    background: #404244;
}

QToolButton:hover {
    background: #4d4f52;
}

QToolButton:pressed {
    background: #313234;
}

/********************************* Text Edits ********************************/

/* Note: This includes Console, which inherits QPlainTextEdit
 */

QPlainTextEdit {
    background: #2e2f30;
    border: 0px;
}

/****************************** Docks ****************************************/

/* Separator between QDockWidgets, for resizing purposes.
 *
 * We would prefer the size of the separator to be 0px for a more modern flat
 * design, unfortunately, at least on Windows, the size of the separator
 * determines the area where the resize handle would appear. Therefore, if we
 * set a size of 0px, we actually can't resize the dock.
 *
 * As a workaround, we currently set the size to be 5px to make it reasonably
 * easy to resize even when using a pen tablet, but we make its color to be
 * the background color of the Console so that it doesn't look ugly with the
 * Console opened (but it does look ugly with other docks open)
 *
 * TODO: Fix this once and for all by ensuring that the resize handle show up
 * within a certain distance of the separator, and set the separator size to
 * 0px.
 *
 * Note: when we set the size to be 1px, the separator's color becomes QWidget
 * { background } instead of QMainWindow::separator { background }. I assume
 * this is a bug.
 *
 * One workaround would be not to use a generic 'QWidget' selector, but
 * unfortunately the ColorSelector becomes ugly if we do this, due to some
 * private widgets (e.g., QColorLuminancePicker) that get painted with a
 * default color instead of Dialog { background }.
 *
 * Our options are:
 * 1. Set a > 1px separator, as we currently do
 * 2. Instead of setting QWidget { background }, explicitly list all classes
 *    which we want to affect, including private Qt classes such as
 *    QColorLuminancePicker
 * 3. Leave the 1px-wide separator with QWidget { background } color.
 */

QMainWindow::separator {
    background: #2e2f30;
    width: 5px; /* when vertical */
    height: 5px; /* when horizontal */
}

QMainWindow::separator:horizontal {
    background: #2e2f30;
}

QMainWindow::separator:vertical {
    background-color: #404244;
}

/*********************** One-line Input Widgets ***************************/

QLabel,
QPushButton,
QLineEdit,
QSpinBox,
QSpinBox::up-button,
QSpinBox::down-button,
QSpinBox::up-arrow,
QSpinBox::down-arrow,
QComboBox,
QComboBox::drop-down,
QComboBox::down-arrow {
    margin: 0px;
    padding: 0px;
    border: 0px;
}

QLabel {
    height: 25px;           /* Intended height with padding = 26px */
    padding-bottom: 1px;    /* Fine-tune vertical alignment */
}

QPushButton,
QLineEdit,
QSpinBox,
QComboBox {
    height: 23px;           /* Intended height with border + padding = 26px */
    padding-bottom: 1px;    /* Fine-tune vertical alignment */
    border: 1px solid #212222;
    border-radius: 2px;
}

QPushButton {
    padding-left: 20px;
    padding-right: 20px;
}

QComboBox {
    padding-left: 6px;
    selection-background-color: #404244;
}

QPushButton,
QComboBox {
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                stop:0 #3e4044,
                stop:1 #272829);
}

QPushButton:hover,
QComboBox:hover {
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                stop:0 #484a4f,
                stop:1 #2e3031);
}

QPushButton:pressed,
QComboBox:pressed {
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                stop:0 #393b3f,
                stop:1 #232425);
}

QLineEdit,
QSpinBox {
    background: #2e2f30;
}

QSpinBox::up-button,
QSpinBox::down-button {
    width: 12px;
    height: 12px;
    border-left: 1px solid #212222;
}

QSpinBox::up-button {
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                stop:0 #3e4044,
                stop:1 #323336);
}

QSpinBox::down-button {
    background: qlineargradient(x1:0, y1:0, x2:0, y2:1,
                stop:0 #323336,
                stop:1 #272829);
}

QSpinBox::up-button:hover,
QSpinBox::down-button:hover {
    background: #484a4f;
}

QSpinBox::up-button:pressed,
QSpinBox::down-button:pressed {
    background: #2e2f30;
}

QComboBox::drop-down {
    width: 12px;
    height: 24px;
    border-left: 1px solid #212222;
    background: transparent;
}

QSpinBox::up-arrow,
QSpinBox::down-arrow {
    width: 12px;
    height: 12px;
}

QSpinBox::up-arrow {
    image: url(vgc:/widgets/images/spinboxup.png);
}

QSpinBox::down-arrow {
    image: url(vgc:/widgets/images/spinboxdown.png);
}

QComboBox::down-arrow {
    width: 12px;
    height: 24px;
    image: url(vgc:/widgets/images/spinboxdown.png);
}

/***************************** QListView **********************************/

QListView {
    background: #313234;
    border: 1px solid #212222;
}

/***************************** QTreeView **********************************/

QAbstractScrollArea {
    background: #313234;
}

QTreeView {
    border: 1px solid #212222;
}

/*************************** QScrollBar ***********************************/

/* Note: aesthetically, it would look better to give a small margin at the right
 * of vertical scrollbars (like in Sublime Text). However, we also want users
 * to have the ability to manipulate the scrollbar when their mouse is at the
 * right-most pixel of the screen (assuming the app is maximized or in
 * fullscreen). This behavior is unfortunately not compatible with having a
 * right margin, at least not without non-trivial modifications. Therefore, we
 * don't use a right margin, since we favor usability over aesthetics.
 */

/* Prevent drawing a background below QScrollBar:vertical|horizontal. The intent
 * is the following code (which doesn't work for mysterious reasons):
 *
 *   QScrollBar {
 *       background: transparent;
 *   }
 */
QPlainTextEdit > QWidget {
    background: transparent;
}

QScrollBar:horizontal,
QScrollBar:vertical {
    margin: 10px;
    border-radius: 5px;
    background-color: #404244;
}

QScrollBar:horizontal {
    height: 10px;
    margin-top: 0px;    /* See note above */
    margin-bottom: 0px; /* See note above */
}

QScrollBar:vertical {
    width: 10px;
    margin-left: 0px;  /* See note above */
    margin-right: 0px; /* See note above */
}

QScrollBar::handle:horizontal,
QScrollBar::handle:vertical {
    border-radius: 5px;
    background-color: #5d6060;
}

QScrollBar::handle:horizontal {
    min-width: 20px;
}

QScrollBar::handle:vertical {
    min-height: 20px;
}

QScrollBar::handle:hover {
    background-color: #0b52ac;
}

QScrollBar::add-line:horizontal,
QScrollBar::add-line:vertical,
QScrollBar::sub-line:horizontal,
QScrollBar::sub-line:vertical {
    height: 0px;
}

QScrollBar::add-page:horizontal,
QScrollBar::add-page:vertical,
QScrollBar::sub-page:horizontal,
QScrollBar::sub-page:vertical {
    background: none;
}

/********************************* Console ********************************/

vgc--widgets--Console,
vgc--widgets--ConsoleMargin {
    font-family: "Source Code Pro";
    border: 0px;
    background: #2e2f30;
}

/****************************** QColorDialog ******************************/

/* Relevant classes:
 *
 *   QColorDialog              the whole color dialog              (inherits QDialog)
 *   QColorPicker              2D hue-saturation gradient          (inherits QFrame)
 *   QColorLuminancePicker     vertical luminance gradient         (inherits QWidget)
 *   QWellArray                array of colored rectangles         (inherits QWidget)
 *   QColorWell                "Basic colors" and "Custom colors"  (inherits QWellArray)
 *   QColorShower              current color and RGB/HSV/HTML      (inherits QWidget)
 *   QColorShowLabel           current color                       (inherits QFrame)
 *
 * See: https://github.com/qt/qtbase/blob/5.12/src/widgets/dialogs/qcolordialog.cpp
 */

QColorPicker {
    border: 0px;
}

QColorLuminancePicker {
    color: black;                  /* color of the small triangle indicating current luminance */
    background-color: transparent; /* color of the right margin (background of small triangle) */
}

QWellArray,
QColorShowLabel {
    border: 1px solid #212222;
}

/********************************* FileDialog ********************************/

/* remove bottom-right size grip (was overlapping the Cancel button) */
QFileDialog QSizeGrip {
    background-color: transparent;
    width: 0px;
    height: 0px;
}
