language: cpp
matrix:
  include:
    - name: "Ubuntu 16.04"
      os: linux
      dist: xenial
      before_install:
      - sudo add-apt-repository -y ppa:beineri/opt-qt-5.12.3-xenial
      - sudo apt-get -y update
      install:
      - sudo apt-get install -y libgl1-mesa-dev
      - sudo apt-get install -y qt512base
      - source /opt/qt512/bin/qt512-env.sh
      - pyenv global 3.7
      - which python
      - CMAKE_EXTRA_ARGS+=" -DPYTHON_EXECUTABLE=$(which python)"

script:
  - mkdir build
  - cd build
  - cmake .. -DCMAKE_BUILD_TYPE=Release ${CMAKE_EXTRA_ARGS}
  - make
  - make test
